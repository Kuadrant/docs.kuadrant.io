
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.kuadrant.io/dev/architecture/docs/design/architectural-overview/">
      
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>Kuadrant Architectural Overview [Draft] - Kuadrant Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.0253249f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kuadrant-architectural-overview-draft" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  These docs are unstable, from our development branches (main).
  <a href="../../../../.."> 
    <strong>Click here to go to latest, stable docs.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Kuadrant Documentation" class="md-header__button md-logo" aria-label="Kuadrant Documentation" data-md-component="logo">
      
  <img src="../../../../assets/images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kuadrant Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Kuadrant Architectural Overview [Draft]
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/kuadrant/docs.kuadrant.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Kuadrant Documentation" class="md-nav__button md-logo" aria-label="Kuadrant Documentation" data-md-component="logo">
      
  <img src="../../../../assets/images/logo.png" alt="logo">

    </a>
    Kuadrant Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kuadrant/docs.kuadrant.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../install-helm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install with Helm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../install-olm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install with OLM
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architectural-overview-v1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/overviews/dns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DNSPolicy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/overviews/tls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TLSPolicy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/overviews/auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AuthPolicy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/overviews/rate-limiting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RateLimitPolicy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    APIs & Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            APIs & Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/reference/dnspolicy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DNSPolicy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/reference/tlspolicy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TLSPolicy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/reference/authpolicy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AuthPolicy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/reference/ratelimitpolicy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RateLimitPolicy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/reference/kuadrant/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kuadrant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Observability
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            Observability
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/observability/metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metrics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../authorino/docs/user-guides/observability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication and Authorization
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/full-walkthrough/secure-protect-connect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secure, connect and protect
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/tls/gateway-tls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gateway TLS for Cluster Operators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/auth/auth-for-app-devs-and-platform-engineers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enforcing authentication & authorization with Kuadrant AuthPolicy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/ratelimiting/gateway-rl-for-cluster-operators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gateway Rate Limiting for Cluster Operators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/ratelimiting/authenticated-rl-for-app-developers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authenticated Rate Limiting for Application Developers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/ratelimiting/authenticated-rl-with-jwt-and-k8s-authnz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authenticated Rate Limiting with JWTs and Kubernetes RBAC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/ratelimiting/multi-auth-rlp-diff-section/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gateway Rate Limiting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/ratelimiting/multi-auth-rlp-same-section/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi authenticated Rate Limiting for an Application
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" >
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DNS configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            DNS configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../dns-operator/docs/provider/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring a DNS Provider
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/dns/gateway-dns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gateway DNS for ingress Gateway
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/dns/basic-dns-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic DNS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/dns/load-balanced-dns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DNS Load Balancing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/user-guides/dns/dnshealthchecks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Health Checks
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/install/mtls-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mTLS Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Observability
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            Observability
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/observability/examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dashboards and Alerts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../kuadrant-operator/doc/observability/tracing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tracing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-architectural-areas" class="md-nav__link">
    <span class="md-ellipsis">
      Key Architectural Areas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1000m-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      1000m Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1000m Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#control-plane-components-and-responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      Control Plane Components and Responsibilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Control Plane Components and Responsibilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kuadrant-operator" class="md-nav__link">
    <span class="md-ellipsis">
      Kuadrant Operator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-cluster-gateway-controller" class="md-nav__link">
    <span class="md-ellipsis">
      Multi-Cluster Gateway Controller
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kuadrant-add-on-manager" class="md-nav__link">
    <span class="md-ellipsis">
      Kuadrant-add-on-manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitador-operator" class="md-nav__link">
    <span class="md-ellipsis">
      Limitador Operator:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authorino-operator" class="md-nav__link">
    <span class="md-ellipsis">
      Authorino Operator:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-plane-components-and-responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      Data Plane Components and Responsibilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Plane Components and Responsibilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limitador" class="md-nav__link">
    <span class="md-ellipsis">
      Limitador
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authorino" class="md-nav__link">
    <span class="md-ellipsis">
      Authorino
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wasm-shim" class="md-nav__link">
    <span class="md-ellipsis">
      WASM Shim
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependencies-and-integrations" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies and integrations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependencies and integrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cert-manager-required" class="md-nav__link">
    <span class="md-ellipsis">
      Cert-Manager: Required
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-cluster-manager-required" class="md-nav__link">
    <span class="md-ellipsis">
      Open Cluster Manager: Required
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#istio-required" class="md-nav__link">
    <span class="md-ellipsis">
      Istio: Required
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-api-required" class="md-nav__link">
    <span class="md-ellipsis">
      Gateway API: Required
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thanosprometheusgrafana-optional" class="md-nav__link">
    <span class="md-ellipsis">
      Thanos/Prometheus/Grafana: Optional
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#high-level-multi-cluster-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      High Level Multi-Cluster Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Single cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-does-kuadrant-leverage-open-cluster-management" class="md-nav__link">
    <span class="md-ellipsis">
      How does Kuadrant leverage Open Cluster Management?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How does Kuadrant leverage Open Cluster Management?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gateway-deployment-and-distribution" class="md-nav__link">
    <span class="md-ellipsis">
      Gateway Deployment and Distribution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-does-kuadrant-integrate-with-gateway-providers" class="md-nav__link">
    <span class="md-ellipsis">
      How does Kuadrant integrate with Gateway Providers?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How does Kuadrant integrate with Gateway Providers?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-flows" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flows
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Flows">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#control-plane-configuration-and-status-reporting" class="md-nav__link">
    <span class="md-ellipsis">
      Control plane configuration and status reporting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#third-party-enforcement-and-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Third party enforcement and Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Request Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth" class="md-nav__link">
    <span class="md-ellipsis">
      Auth
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#observability" class="md-nav__link">
    <span class="md-ellipsis">
      Observability
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-notes-on-future-direction" class="md-nav__link">
    <span class="md-ellipsis">
      Some notes on future direction
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/kuadrant/architecture/blob/main/docs/design/architectural-overview.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="kuadrant-architectural-overview-draft">Kuadrant Architectural Overview [Draft]<a class="headerlink" href="#kuadrant-architectural-overview-draft" title="Permanent link">&para;</a></h1>
<!--- variables for repeated links --->
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>It is important to note that Kuadrant is not in itself a gateway provider. Kuadrant provides a set of valuable policy APIs that enhance <a href="https://github.com/kubernetes-sigs/gateway-api">Gateway API</a> via its defined <a href="https://gateway-api.sigs.k8s.io/references/policy-attachment/">policy attachment</a> extension point. The policy APIs are reconciled by a set of policy controllers and enforced via integration at different points to configure, enhance and secure the application connectivity provided via Gateway API and the underlying gateway provider. 
These policy extensions are focused around areas such as DNS management supporting global load balancing and health checks, alongside service protection specific APIs such as rate limiting and auth. Kuadrant also integrates with <a href="https://open-cluster-management.io/">Open Cluster Management</a> as a multi-cluster control plane to enable defining and distributing Gateways across multiple clusters, providing load balancing and tls management for these distributed gateways. These integrations and features can be managed centrally in a declarative way from the Open Cluster Management Hub using Kubernetes resources.</p>
<h2 id="key-architectural-areas">Key Architectural Areas<a class="headerlink" href="#key-architectural-areas" title="Permanent link">&para;</a></h2>
<ul>
<li>The Kuadrant architecture is spread across a control plane and also a data plane. Kuadrant can work in both a single and multi-cluster context. 
Currently in order for all APIs to work in a single or multi-cluster context you need to have Open Cluster Management installed.  While this may change in the future, this approach allows us to start with a single cluster and seamlessly scale as more clusters are added.</li>
<li>The control plane is where policies are exposed and expressed as kubernetes APIs and reconciled by the Kuadrant policy controllers. </li>
<li>The data plane is where Kuadrant's service protection components, configured by the  control plane policies, are enforced within the gateway instance as part of the request flow. </li>
</ul>
<h2 id="1000m-architecture">1000m Architecture<a class="headerlink" href="#1000m-architecture" title="Permanent link">&para;</a></h2>
<p><img alt="" src="../images/1000m-overview.png" /></p>
<h3 id="control-plane-components-and-responsibilities">Control Plane Components and Responsibilities<a class="headerlink" href="#control-plane-components-and-responsibilities" title="Permanent link">&para;</a></h3>
<p>A control plane component is something responsible for accepting instruction via a CRD based API and ensuring that configuration is manifested into state that can be acted on.</p>
<h4 id="kuadrant-operator"><a href="https://github.com/Kuadrant/Kuadrant-operator">Kuadrant Operator</a><a class="headerlink" href="#kuadrant-operator" title="Permanent link">&para;</a></h4>
<ul>
<li>Installation of data plane service protection components via their respective operators</li>
<li>Exposes <a href="https://docs.kuadrant.io/kuadrant-operator/doc/rate-limiting/"><code>RateLimitPolicy</code></a> and <a href="https://docs.kuadrant.io/kuadrant-operator/doc/auth/"><code>AuthPolicy</code></a> and is currently the policy controller for these APIs</li>
<li>Configures the Gateway to be able to leverage the data plane service protection components</li>
</ul>
<h4 id="multi-cluster-gateway-controller"><a href="https://github.com/Kuadrant/multicluster-gateway-controller">Multi-Cluster Gateway Controller</a><a class="headerlink" href="#multi-cluster-gateway-controller" title="Permanent link">&para;</a></h4>
<ul>
<li>Exposes <a href="https://docs.kuadrant.io/kuadrant-operator/doc/dns/"><code>DNSPolicy</code></a> and <a href="https://docs.kuadrant.io/kuadrant-operator/doc/tls/"><code>TLSPolicy</code></a></li>
<li>Configures DNS providers (e.g AWS Route 53) and TLS providers</li>
<li>Focused around use cases involving distributed gateways (for example across clouds or geographic regions)</li>
<li>Integrates with Open Cluster Management as the multi-cluster management hub to distribute and observe gateway status based on the clusters they are deployed to. Works directly with Open Cluster Management APIs such <a href="https://open-cluster-management.io/concepts/placement/#placementdecisions"><code>PlacementDecision</code></a> and <a href="https://open-cluster-management.io/concepts/manifestwork/"><code>ManifestWork</code></a>.</li>
</ul>
<h4 id="kuadrant-add-on-manager"><a href="https://github.com/Kuadrant/multicluster-gateway-controller/tree/main/cmd/ocm">Kuadrant-add-on-manager</a><a class="headerlink" href="#kuadrant-add-on-manager" title="Permanent link">&para;</a></h4>
<ul>
<li>Sub component in the gateway controller repository</li>
<li>Follows the <a href="https://open-cluster-management.io/concepts/addon/">add-on pattern</a> from Open Cluster Management</li>
<li>Responsible for configuring and installing Kuadrant into a target spoke cluster</li>
</ul>
<h4 id="limitador-operator"><a href="https://github.com/Kuadrant/limitador-operator">Limitador Operator:</a><a class="headerlink" href="#limitador-operator" title="Permanent link">&para;</a></h4>
<ul>
<li>Installs and configures Limitador</li>
</ul>
<h4 id="authorino-operator"><a href="https://github.com/Kuadrant/authorino-operator">Authorino Operator:</a><a class="headerlink" href="#authorino-operator" title="Permanent link">&para;</a></h4>
<ul>
<li>Installs and configures Authorino</li>
</ul>
<h3 id="data-plane-components-and-responsibilities">Data Plane Components and Responsibilities<a class="headerlink" href="#data-plane-components-and-responsibilities" title="Permanent link">&para;</a></h3>
<p>A data plane component sits in the request flow and is responsible for enforcing policy and providing service protection capabilities based on configuration managed and created by the control plane.</p>
<h4 id="limitador"><a href="https://github.com/Kuadrant/limitador">Limitador</a><a class="headerlink" href="#limitador" title="Permanent link">&para;</a></h4>
<ul>
<li>Complies with the with Envoy rate limiting API to provide rate limiting to the gateway</li>
</ul>
<h4 id="authorino"><a href="https://github.com/Kuadrant/authorino">Authorino</a><a class="headerlink" href="#authorino" title="Permanent link">&para;</a></h4>
<ul>
<li>Complies with the Envoy external auth API to provide auth integration to the gateway</li>
</ul>
<h4 id="wasm-shim"><a href="https://github.com/Kuadrant/wasm-shim">WASM Shim</a><a class="headerlink" href="#wasm-shim" title="Permanent link">&para;</a></h4>
<ul>
<li>Uses the <a href="https://github.com/proxy-wasm/spec">Proxy WASM ABI Spec</a> to integrate with Envoy and provide filtering and connectivity to Limitador for request time enforcement of and rate limiting</li>
</ul>
<h3 id="dependencies-and-integrations">Dependencies and integrations<a class="headerlink" href="#dependencies-and-integrations" title="Permanent link">&para;</a></h3>
<p>In order to provide its full suite of functionality, Kuadrant has several dependencies. Some of these are optional depending on the functionality needed.</p>
<h4 id="cert-manager-required"><a href="https://cert-manager.io/">Cert-Manager</a>: <strong>Required</strong><a class="headerlink" href="#cert-manager-required" title="Permanent link">&para;</a></h4>
<ul>
<li>Provides TLS integration</li>
<li>Used by <a href="https://docs.kuadrant.io/kuadrant-operator/doc/tls/"><code>TLSPolicy</code></a> and <a href="https://github.com/Kuadrant/authorino">Authorino</a>.</li>
</ul>
<h4 id="open-cluster-manager-required"><a href="https://open-cluster-management.io/">Open Cluster Manager</a>: <strong>Required</strong><a class="headerlink" href="#open-cluster-manager-required" title="Permanent link">&para;</a></h4>
<ul>
<li>Provides a multi-cluster control plane to enable the defining and distributing of Gateways across multiple clusters.</li>
</ul>
<h4 id="istio-required"><a href="https://istio.io">Istio</a>: <strong>Required</strong><a class="headerlink" href="#istio-required" title="Permanent link">&para;</a></h4>
<ul>
<li>Gateway API provider that Kuadrant integrates with via WASM and Istio APIS to provide service protection capabilities.</li>
<li>Used by <a href="https://docs.kuadrant.io/kuadrant-operator/doc/rate-limiting/"><code>RateLimitPolicy</code></a> and <a href="https://docs.kuadrant.io/kuadrant-operator/doc/auth/"><code>AuthPolicy</code></a></li>
</ul>
<h4 id="gateway-api-required"><a href="https://github.com/kubernetes-sigs/gateway-api">Gateway API</a>: <strong>Required</strong><a class="headerlink" href="#gateway-api-required" title="Permanent link">&para;</a></h4>
<ul>
<li>New standard for Ingress from the Kubernetes community</li>
<li>Gateway API is the core API that Kuadrant integrates with.</li>
</ul>
<h4 id="thanosprometheusgrafana-optional"><a href="https://thanos.io">Thanos/Prometheus/Grafana</a>: <strong>Optional</strong><a class="headerlink" href="#thanosprometheusgrafana-optional" title="Permanent link">&para;</a></h4>
<ul>
<li>Provides observability integration</li>
<li>Rather than providing any Kuadrant specific observability tooling, we instead look to leverage existing tools and technologies to provide observability capabilities for ingress. </li>
</ul>
<h2 id="high-level-multi-cluster-architecture">High Level Multi-Cluster Architecture<a class="headerlink" href="#high-level-multi-cluster-architecture" title="Permanent link">&para;</a></h2>
<p><img alt="" src="../images/high-level-multi-cluster.png" /></p>
<p>Kuadrant has a multi-cluster gateway controller that is intended to run in a Open Cluster Management provided "Hub" cluster. This cluster is effectively a central management cluster where policy and gateways along with all that Open Cluster Management offers can be defined and distributed to the managed "spoke" clusters. </p>
<h2 id="single-cluster">Single cluster<a class="headerlink" href="#single-cluster" title="Permanent link">&para;</a></h2>
<p>In a single cluster context, the overall architecture remains the same as above, the key difference is that the Hub and Spoke cluster are now a single cluster rather than multiple clusters. This is how we are initially supporting single cluster.</p>
<h2 id="how-does-kuadrant-leverage-open-cluster-management">How does Kuadrant leverage Open Cluster Management?<a class="headerlink" href="#how-does-kuadrant-leverage-open-cluster-management" title="Permanent link">&para;</a></h2>
<p>Kuadrant deploys a multi-cluster gateway controller into the Open Cluster Management hub (a control plane that manages a set of "spoke" clusters where workloads are executed). This controller offers its own APIs but also integrates with hub CRD based APIs (such as the placement API) along with the Gateway API CRD based APIs in order to provide multi-cluster Gateway capabilities to the hub and distribute actual gateway instances to the spokes. See the Open Cluster Management <a href="https://open-cluster-management.io/concepts/architecture/#hub-spoke-architecture">docs</a> for further details on the hub spoke architecture.</p>
<p>As part of installing Kuadrant, the Gateway API CRDs are also installed into the hub cluster and Kuadrant defines a standard Gateway API <a href="https://gateway-api.sigs.k8s.io/api-types/gatewayclass/"><code>GatewayClass</code></a> resource that the multi-cluster gateway controller is the chosen controller for. </p>
<p>Once installed, an Open Cluster Management user can then (with the correct RBAC in place) define in the standard way a <a href="https://gateway-api.sigs.k8s.io/api-types/gateway/">Gateway resource</a> that inherits from the Kuadrant configured <code>GatewayClass</code> in the hub. There is nothing unique about this Gateway definition, the difference is what it represents and how it is used. This Gateway is used to represent a "multi-cluster" distributed gateway. As such there are no pods running behind this Gateway instance in the hub cluster, instead it serves as a template that the Kuadrant multi-cluster gateway controller reconciles and distributes to targeted spoke clusters.  It leverages the Open Cluster Management APIs to distribute these gateways (more info below) and aggregates the status information from each spoke cluster instance of this gateway back to this central definition, in doing this it can represent the status of the gateway across multiple clusters but also use that information to integrate with DNS providers etc.</p>
<p><img alt="" src="../images/ocm-integration.png" /></p>
<h3 id="gateway-deployment-and-distribution">Gateway Deployment and Distribution<a class="headerlink" href="#gateway-deployment-and-distribution" title="Permanent link">&para;</a></h3>
<p>In order for a multi-cluster gateway to be truly useful, it needs to be distributed or "placed" on a specific set of hub managed spoke clusters.  Open Cluster Management is responsible for a set of placement and replication APIs. Kuadrant is aware of these APIs, and so when a given gateway is chosen to be placed on a set of managed clusters, Kuadrant multi-cluster gateway controller will ensure the right resources (<a href="https://open-cluster-management.io/concepts/manifestwork/"><code>ManifestWork</code></a>) are created in the correct namespaces in the hub. Open Cluster Management then is responsible for syncing these to the actual spoke cluster and reporting back the status of these resources to the Hub. A user would indicate which clusters they want a gateway placed on by using a <a href="https://open-cluster-management.io/concepts/placement/"><code>Placement</code></a> and then labeling the gateway using the <code>cluster.open-cluster-management.io/placement</code> label.</p>
<p>In order for the Gateway to be instantiated, we need to know what underlying gateway provider is being used on the spoke clusters. Admins can then set this provider in the hub via the GatewayClass params. In the hub, Kuadrant will then apply a transformation to the gateway to ensure when synced it references this spoke gateway provider (Istio for example). </p>
<p>It is the Open Cluster Management workagent that is responsible for syncing down and applying the resources into the managed spoke cluster. It is also responsible for syncing status information back to the hub. It is the multi-cluster gateway controller that is responsible for aggregating this status.</p>
<p>The status information reported back to the Hub is used by the multi-cluster gateway controller to know what LB hosts / IPAddresses to use for DNSRecords that it creates and manages.</p>
<p><img alt="" src="../images/gateway-placement.png" /></p>
<p>More info on the Open Cluster Management hub and spoke architecture can be found <a href="https://open-cluster-management.io/concepts/architecture/">here</a></p>
<h2 id="how-does-kuadrant-integrate-with-gateway-providers">How does Kuadrant integrate with Gateway Providers?<a class="headerlink" href="#how-does-kuadrant-integrate-with-gateway-providers" title="Permanent link">&para;</a></h2>
<p>Currently the Kuadrant data plane only integrates with an Istio based gateway provider:</p>
<ul>
<li>It registers Authorino with the <a href="https://istio.io/latest/docs/reference/config/istio.operator.v1alpha1/#IstioOperatorSpec"><code>IstioOperator</code></a> as an auth provider so that Authorino can be used as an external auth provider.</li>
<li>It leverages an <a href="https://istio.io/latest/docs/reference/config/networking/envoy-filter/"><code>EnvoyFilter</code></a> to register the rate limiting service as an upstream service.</li>
<li>Based on the Kuadrant <a href="https://docs.kuadrant.io/kuadrant-operator/doc/auth/"><code>AuthPolicy</code></a>, it leverages Istio's <a href="https://istio.io/latest/docs/reference/config/security/authorization-policy/"><code>AuthorizationPolicy</code></a> resource to configure when a request should trigger Authorino to be called for a given host, path and method etc. </li>
<li>It provides a WebAssembly (WASM) Plugin that conforms to the <a href="https://github.com/proxy-wasm/spec">Proxy WASM ABI</a> (application binary interface). This WASM Plugin is loaded into the underlying Envoy based gateway provider and configured via the Kuadrant Operator based on defined <a href="https://docs.kuadrant.io/kuadrant-operator/doc/rate-limiting/"><code>RateLimitPolicy</code></a> resources. This binary is executed in response to a HTTP request being accepted by the gateway via the underlying Envoy instance that provides the proxy layer for the Gateway (IE Envoy). This plugin is configured with the correct upstream rate limit service name and when it sees a request, based on the provided configuration, it will trigger a call to the installed Limitador that is providing the rate limit capabilities and either allow the request to continue or trigger a response to the client with a 429 (too many requests) HTTP code.</li>
</ul>
<h3 id="data-flows">Data Flows<a class="headerlink" href="#data-flows" title="Permanent link">&para;</a></h3>
<p>There are several different data flows when using Kuadrant. </p>
<h4 id="control-plane-configuration-and-status-reporting">Control plane configuration and status reporting<a class="headerlink" href="#control-plane-configuration-and-status-reporting" title="Permanent link">&para;</a></h4>
<p>The initial creation of these APIs (gateways, policies etc) is done by the relevant persona in the control plane just as they would any other k8s resource. We use the term cluster admin or gateway admin as the operations type persona configuring, and placing gateways. 
As shown above, in a multi-cluster configuration. API definitions are pulled from the Hub and "manifested" into the spokes. The Status of those synced resources are reported back to the Hub. The same happens for a single cluster, the only difference being the work agent hub controllers are all installed on one cluster.</p>
<h4 id="third-party-enforcement-and-integration">Third party enforcement and Integration<a class="headerlink" href="#third-party-enforcement-and-integration" title="Permanent link">&para;</a></h4>
<p>In order to enforce the policy configuration, components in the control plane and data plane can reach out to configured 3rd parties such as cloud based DNS provider, TLS providers and Auth providers.</p>
<h4 id="request-flow">Request Flow<a class="headerlink" href="#request-flow" title="Permanent link">&para;</a></h4>
<p>Requests coming through the gateway instance can be sent to Limitador based on configuration of the WASM plugin installed into the Envoy based gateway provider or to Authorino based configuration provided by the Istio <a href="https://istio.io/latest/docs/reference/config/security/authorization-policy/"><code>AuthorizationPolicy</code></a>. 
Each of these components have the capability to see the request and need to in order to make the required decision. Each of these components can also prevent the request from reaching its intended backend destination based on user configuration. </p>
<p><img alt="" src="../images/request-flow.png" /></p>
<h2 id="auth">Auth<a class="headerlink" href="#auth" title="Permanent link">&para;</a></h2>
<p>As all of the APIs are CRDs, auth around creating these resources is handled in the standard way IE by the kubernetes cluster and RBAC. There is no relationship by default between the Auth features provided by Authorino to application developers and the auth requirements of the cluster API server.</p>
<p>For Auth between Spoke and Hub see Open Cluster Management <a href="https://open-cluster-management.io/concepts/architecture/">docs</a></p>
<h3 id="observability">Observability<a class="headerlink" href="#observability" title="Permanent link">&para;</a></h3>
<p>Kuadrant doesn't provide any specific observability components, but rather provides a reference setup using well known and established components along with some useful dashboards to help observe key things around the Gateways. The focus of this setup, is in the context of a multi-cluster setup where Open Cluster Management is installed and gateways are being defined and distributed from that hub.</p>
<p><img alt="" src="../images/observability.png" /></p>
<h2 id="some-notes-on-future-direction">Some notes on future direction<a class="headerlink" href="#some-notes-on-future-direction" title="Permanent link">&para;</a></h2>
<p>This section is here to provide some insight into architectural changes that may be seen in the near future:</p>
<p>What is in this doc represents the architecture at point our MVP release. Below are some areas that we have identified that are likely to change in the coming releases. As these happen, this doc will also evolve.</p>
<ul>
<li>We want to separate out the ocm integration into its own controller so that policies can evolve without a coupling to any one multi-cluster management solution</li>
<li>We want to separate the policies into their own controller that is capable of supporting both single (without Open Cluster Management) and multi-cluster (with Open Cluster Management enabled) contexts, so that the barrier to entry is reduced for those starting with a single cluster</li>
<li>We want to allow for an on cluster DNS Provider such as CoreDNS so that we can provide an implementation that is disconnected from any cloud provider and provides more flexible DNS setups.</li>
<li>We will look to reduce our integration with Istio and want to provide integration with additional gateway providers such as EnvoyGateway</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer id="footer" class="footer">
  <div class="copyright">
    <p>Copyright <strong><span>The Kuadrant Contributors</span></strong>.</p>
    <p>The Linux Foundation (TLF) has registered trademarks and uses trademarks.</p> 
    <p>For a list of TLF trademarks, see <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a></p>
  </div>

  <div class="sponsored-by">
    <p>
      <a href="https://www.cncf.io/sandbox-projects/"><img src="../../../../assets/images/cncf-color.png" class="logo" alt="CNCF logo"></a>
    </p>
    <p>
      We are a Cloud Native Computing Foundation sandbox project.
    </p>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["content.action.edit", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": ["0.11.0", "latest"], "provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>